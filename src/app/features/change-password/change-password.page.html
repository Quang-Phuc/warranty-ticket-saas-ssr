<!-- src/app/features/change-password/change-password.page.html -->
<div class="cp-page">
    <div class="header">
        <h1>Đổi mật khẩu</h1>
        <p>Bảo mật tài khoản của bạn bằng cách cập nhật mật khẩu thường xuyên.</p>
    </div>

    <form class="card" [formGroup]="form" (ngSubmit)="save()">
        <div class="field">
            <label>Mật khẩu hiện tại <span>*</span></label>
            <input type="password" formControlName="currentPassword" placeholder="Nhập mật khẩu hiện tại" />
            <small *ngIf="form.get('currentPassword')?.touched && form.get('currentPassword')?.invalid">
                Bắt buộc & tối thiểu 6 ký tự
            </small>
        </div>

        <div class="field">
            <label>Mật khẩu mới <span>*</span></label>
            <input type="password" formControlName="newPassword" placeholder="Nhập mật khẩu mới" />
            <small *ngIf="form.get('newPassword')?.touched && form.get('newPassword')?.invalid">
                Bắt buộc & tối thiểu 6 ký tự
            </small>
        </div>

        <div class="field">
            <label>Xác nhận mật khẩu mới <span>*</span></label>
            <input type="password" formControlName="confirmPassword" placeholder="Nhập lại mật khẩu mới" />
            <small *ngIf="form.get('confirmPassword')?.touched && form.get('confirmPassword')?.invalid">
                {{ form.get('confirmPassword')?.errors?.['mismatch'] ? 'Mật khẩu không khớp' : 'Bắt buộc nhập' }}
            </small>
        </div>

        <div class="footer">
            <button type="button" class="btn ghost" (click)="back()">Quay lại</button>
            <button type="submit" class="btn primary" [disabled]="saving()">
                {{ saving() ? 'Đang lưu...' : 'Đổi mật khẩu' }}
            </button>
        </div>

        <div class="msg" *ngIf="message()">{{ message() }}</div>
    </form>
</div>
