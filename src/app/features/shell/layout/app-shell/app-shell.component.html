<!-- src/app/features/shell/layout/app-shell/app-shell.component.html -->
<div class="shell" [attr.data-theme]="theme()">
  <aside class="sidebar">
    <div class="side-top">
      <div class="brand">
        <div class="logo">WP</div>
        <div class="brand-text">
          <div class="name">WarrantyPro</div>
          <div class="sub">SaaS Workspace</div>
        </div>
      </div>

      <button class="theme-btn" type="button" (click)="toggleTheme()" aria-label="Toggle theme">
        <span class="ic">{{ theme() === 'dark' ? 'ğŸŒ™' : 'â˜€ï¸' }}</span>
      </button>
    </div>

    <div class="nav-wrap">
      <ng-container *ngFor="let group of navGroups()">
        <div class="group-title">{{ group.label }}</div>

        <div class="nav">
          <ng-container *ngFor="let item of group.items">
            <!-- Parent -->
            <button
              *ngIf="item.children?.length; else leafItem"
              type="button"
              class="nav-item nav-parent"
              [ngClass]="{ open: isOpen(item.id) }"
              (click)="toggleOpen(item.id)"
            >
              <span class="left">
                <span class="icon">{{ item.icon || 'ğŸ“' }}</span>
                <span class="label">{{ item.label }}</span>
              </span>

              <span class="right">
                <span class="badge" *ngIf="item.badge !== undefined">{{ item.badge }}</span>
                <span class="chev" aria-hidden="true"></span>
              </span>
            </button>

            <!-- Leaf -->
            <ng-template #leafItem>
              <a
                class="nav-item"
                [routerLink]="item.route || ''"
                routerLinkActive="active"
                [routerLinkActiveOptions]="{ exact: true }"
              >
                <span class="left">
                  <span class="icon">{{ item.icon || 'â€¢' }}</span>
                  <span class="label">{{ item.label }}</span>
                </span>

                <span class="right">
                  <span class="badge" *ngIf="item.badge !== undefined">{{ item.badge }}</span>
                  <span class="go">â†—</span>
                </span>
              </a>
            </ng-template>

            <!-- Children: animated collapse -->
            <div
              class="children"
              *ngIf="item.children?.length"
              [class.expanded]="isOpen(item.id)"
              [style.maxHeight.px]="isOpen(item.id) ? calcChildrenHeight((item.children?.length ?? 0)) : 0"
            >
              <a
                class="nav-sub"
                *ngFor="let c of item.children"
                [routerLink]="c.route || ''"
                routerLinkActive="active"
                [routerLinkActiveOptions]="{ exact: true }"
              >
                <span class="dot"></span>
                <span class="label">{{ c.label }}</span>
                <span class="mini" *ngIf="c.badge !== undefined">{{ c.badge }}</span>
              </a>
            </div>
          </ng-container>
        </div>
      </ng-container>
    </div>

    <div class="side-bottom">
      <button class="logout" type="button" (click)="logout()">
        <span class="lo-ic">â‹</span>
        <span>ÄÄƒng xuáº¥t</span>
      </button>
    </div>
  </aside>

  <main class="content">
    <router-outlet />
  </main>
</div>
